# Configuration Ansible pour le projet Mega TP DevOps
# Infrastructure Haute Disponibilité

[defaults]
# Inventaire par défaut
inventory = ./inventory/hosts.yml

# Désactiver la vérification des clés SSH
host_key_checking = False

# Ne pas créer de fichiers .retry
retry_files_enabled = False

# Timeout de connexion
timeout = 30

# Nombre de processus parallèles
forks = 10

# Fichier de log
log_path = ./ansible.log

# Chemin des rôles
roles_path = ./roles

# Affichage des différences lors des changements
diff_always = True

# Callback plugins pour un affichage amélioré
stdout_callback = yaml
callback_whitelist = profile_tasks, timer

# Interpréteur Python par défaut
interpreter_python = auto_silent

# Désactiver les avertissements de dépréciation
deprecation_warnings = False

[privilege_escalation]
# Activation de become par défaut
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# Optimisations SSH
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r

[persistent_connection]
# Timeout pour les connexions persistantes
connect_timeout = 30
command_timeout = 30
